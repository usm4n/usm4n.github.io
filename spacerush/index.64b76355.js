function t(t,e,r,i){Object.defineProperty(t,e,{get:r,set:i,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},n=e.parcelRequire5672;null==n&&((n=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},e.parcelRequire5672=n),n.register("hfF85",(function(e,r){t(e.exports,"default",(function(){return h}),(function(t){return h=t}));var i=n("d2jEP"),s=n("1o40Q"),o=r&&!r.nodeType&&r,a=o&&e&&!e.nodeType&&e,c=a&&a.exports===o?i.default.Buffer:void 0,h=(c?c.isBuffer:void 0)||s.default})),n.register("d2jEP",(function(e,r){t(e.exports,"default",(function(){return o}));var i=n("1XI2E"),s="object"==typeof self&&self&&self.Object===Object&&self,o=i.default||s||Function("return this")()})),n.register("1XI2E",(function(r,i){t(r.exports,"default",(function(){return n}));var n="object"==typeof e&&e&&e.Object===Object&&e})),n.register("1o40Q",(function(e,r){t(e.exports,"default",(function(){return i}));var i=function(){return!1}})),n.register("jjCCN",(function(e,r){t(e.exports,"default",(function(){return c}),(function(t){return c=t}));var i=n("1XI2E"),s=r&&!r.nodeType&&r,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s&&i.default.process,c=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}()}));var s=Math.floor,o=Math.random;var a=function(t){var e,r,i=t.length;return i?t[(e=0,r=i-1,e+s(o()*(r-e+1)))]:void 0};var c=function(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n};var h=function(t,e){return c(e,(function(e){return t[e]}))};var l=function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i},u=n("d2jEP").default.Symbol,y=Object.prototype,p=y.hasOwnProperty,d=y.toString,f=u?u.toStringTag:void 0;var b=function(t){var e=p.call(t,f),r=t[f];try{t[f]=void 0;var i=!0}catch(t){}var n=d.call(t);return i&&(e?t[f]=r:delete t[f]),n},x=Object.prototype.toString;var v=function(t){return x.call(t)},g=u?u.toStringTag:void 0;var j=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":g&&g in Object(t)?b(t):v(t)};var m=function(t){return null!=t&&"object"==typeof t};var w=function(t){return m(t)&&"[object Arguments]"==j(t)},A=Object.prototype,O=A.hasOwnProperty,E=A.propertyIsEnumerable,B=w(function(){return arguments}())?w:function(t){return m(t)&&O.call(t,"callee")&&!E.call(t,"callee")},z=Array.isArray,M=n("hfF85"),P=/^(?:0|[1-9]\d*)$/;var C=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&P.test(t))&&t>-1&&t%1==0&&t<e};var S=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object Boolean]"]=k["[object DataView]"]=k["[object Date]"]=k["[object Error]"]=k["[object Function]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object WeakMap]"]=!1;var F=function(t){return m(t)&&S(t.length)&&!!k[j(t)]};var V,I=n("jjCCN"),T=I.default&&I.default.isTypedArray,D=T?(V=T,function(t){return V(t)}):F,G=Object.prototype.hasOwnProperty;var U=function(t,e){var r=z(t),i=!r&&B(t),n=!r&&!i&&(0,M.default)(t),s=!r&&!i&&!n&&D(t),o=r||i||n||s,a=o?l(t.length,String):[],c=a.length;for(var h in t)!e&&!G.call(t,h)||o&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||C(h,c))||a.push(h);return a},q=Object.prototype;var N=function(t,e){return function(r){return t(e(r))}},R=N(Object.keys,Object),L=Object.prototype.hasOwnProperty;var X=function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||q))return R(t);var e,r,i=[];for(var n in Object(t))L.call(t,n)&&"constructor"!=n&&i.push(n);return i};var Q=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var W=function(t){if(!Q(t))return!1;var e=j(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var _=function(t){return null!=(e=t)&&S(e.length)&&!W(e)?U(t):X(t);var e};var H=function(t){return a(null==(e=t)?[]:h(e,_(e)));var e};const $=new Map([["dark900","#101329"],["dark700","#1b1e32"],["green900","#50fa7b"],["green700","#B1fdc5"],["blue","#6272a4"],["purple","#bd93f9"]]);class J{setVelocity(t,e){this.velocity={x:t,y:e}}setPosition(t,e){this.center.x=t,this.center.y=e}boundary(){return{x1:this.center.x-this.size/2,x2:this.center.x+this.size/2,y1:this.center.y-this.size/2,y2:this.center.y+this.size/2}}update(){this.center.x+=this.velocity.x,this.center.y+=this.velocity.y}render(t){t.fillStyle=this.color,t.fillRect(this.center.x-this.size/2,this.center.y-this.size/2,this.size,this.size)}constructor(t,e,r,i){this.center={x:t,y:e},this.size=r,this.color=i,this.velocity={x:0,y:0}}}class K extends J{update(){this.angle+=this.angularVelocity}relocate(t){this.center=t}render(t){t.save(),t.translate(this.center.x,this.center.y),t.rotate(this.angle),t.translate(-this.center.x,-this.center.y),super.render(t),t.restore()}constructor(t,e,r,i){super(t,e,r,i),this.angle=0,this.angularVelocity=6*Math.PI/180}}class Y extends J{hide(){this.hidden=!0}randomizeDirection(){Math.random()<.5&&(this.clockwise=!this.clockwise,this.direction.x*=-1,this.direction.y*=-1)}animateColor(t){this.color=t,setTimeout((()=>{this.color=this.defaultColor}),200)}update(){this.hidden?this.size-=this.size/4:(this.blockCount+=1,this.blockCount%3==0&&this.tail.push({...this.center}),this.tail.length>this.tailLength&&this.tail.shift(),this.center.x+=this.direction.x*this.velocity.x,this.center.y+=this.direction.y*this.velocity.y)}render(t){t.save();let e=.5;const r=this.size/2;this.tail.forEach(((i,n)=>{const s=r/this.tailLength*n;e+=.03,t.globalAlpha=e,t.fillStyle=this.color,t.fillRect(i.x-s/2,i.y-s/2,s,s)})),t.restore(),super.render(t)}changeDirection(){const{x:t,y:e}=this.direction;this.clockwise?(this.direction.x=-1*e,this.direction.y=t):(this.direction.x=e,this.direction.y=-1*t)}registerEvents(){window.onkeydown=t=>{32===t.keyCode&&this.changeDirection()},window.ontouchstart=()=>this.changeDirection()}constructor(t,e,r,i){super(t,e,r,i),this.direction={x:1,y:0},this.clockwise=!1,this.tail=[],this.tailLength=9,this.blockCount=0,this.registerEvents(),this.hidden=!1,this.defaultColor=i}}class Z{push(...t){Array.prototype.unshift.apply(this.objects,t.flat())}pop(t,e=0){return this.objects.splice(t,e)}append(...t){Array.prototype.push.apply(this.objects,t.flat())}objectAt(t){return{...this.objects[t]}}setVelocity(t,e){this.objects.forEach((r=>r.setVelocity(t,e)))}update(t){this.objects.forEach((e=>e.update(t)))}render(t){this.objects.forEach((e=>e.render(t)))}constructor(){this.objects=[]}}class tt extends J{update(){this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.velocity.y+=this.gravity,this.size-=.05,this.velocity.x*=this.damp,this.velocity.y*=this.damp}constructor(t,e,r,i,n){super(t,e,r,n),this.gravity=.01,this.damp=.97}}class et{create(t){for(let i=0;i<t;i+=1){const t=(e=this.maxSize/8,r=this.maxSize/2,e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e)+e)),i=new tt(this.position.x,this.position.y,t,this.color),n=(Math.random()-.5)*(Math.random()*this.maxVelocity),s=(Math.random()-.5)*(Math.random()*this.maxVelocity);i.setVelocity(n,s),this.particles.push(i)}var e,r;return this}update(){this.particles.forEach(((t,e)=>{const r=t;r.size<.5&&this.particles.splice(e,1),r.update()}))}render(t){this.particles.forEach((e=>e.render(t)))}isEmpty(){return!!this.particles.length}fire(){const t=()=>this.particles.length?(this.update(),new Promise(requestAnimationFrame).then(t)):Promise.resolve();return t()}constructor(t,e,r,i){this.position=t,this.maxVelocity=e,this.maxSize=r,this.color=i,this.particles=[]}}const rt=document.getElementById("canvas");rt.height=window.innerHeight,rt.width=window.innerWidth;new class{setUp(){const t=.5*this.canvas.width,e=t/2,r=this.canvas.width/2,i=this.canvas.height/2;this.outerBox=new J(r,i,t,$.get("dark700")),this.innerBox=new J(r,i,e,$.get("dark900")),this.objectGroup.append(this.outerBox),this.objectGroup.append(this.innerBox),this.generatePositions(),this.player=this.createPlayer(),this.player.setVelocity(3,3),this.objectGroup.append(this.player),this.bait=this.createBait(),this.objectGroup.append(this.bait),this.generateStars()}createPlayer(){const t=this.outerBox.boundary(),e=this.innerBox.boundary(),{x:r,y:i}=this.positions[1],n=(t.y2-e.y2)/2.5;return new Y(r,i,n,$.get("green900"))}createBait(){const t=this.outerBox.boundary(),e=this.innerBox.boundary();this.lastPositionIndex=0;const{x:r,y:i}=this.positions[0],n=(t.y2-e.y2)/5;return new K(r,i,n,$.get("purple"))}generatePositions(){const t=this.outerBox.boundary(),e=this.innerBox.boundary(),r=(t.x1+t.x2)/2,i=(t.y2+t.y1)/2,n=(e.x1-t.x1)/2;this.positions=[{x:r,y:t.y1+n},{x:r,y:t.y2-n},{x:t.x1+n,y:i},{x:t.x2-n,y:i}]}generateStars(){const t=this.player.size/10;for(let e=0;e<100;e+=1){const e=Math.random()*this.canvas.width,r=Math.random()*this.canvas.height,i=Math.random()*t,n=.25*Math.random(),s=new J(e,r,i,$.get("green700"));s.setVelocity(n,0),this.stars.push(s)}}recsCollide(t,e){const r=t.boundary(),i=e.boundary();return!(r.x2<i.x1||r.y2<i.y1||r.x1>i.x2||r.y1>i.y2)}gameOver(){const t=this.player.boundary(),e=this.outerBox.boundary();return!!(t.x1<e.x1||t.x2>e.x2||t.y1<e.y1||t.y2>e.y2||this.recsCollide(this.player,this.innerBox))}start(){requestAnimationFrame((t=>this.loop(t)))}update(){if(this.gameOver())this.particles=new et(this.player.center,12,this.player.size,this.player.color),this.objectGroup.append(this.particles),this.particles.create(15).fire().then((()=>console.log("done"))),this.player.hide(),this.player.update();else{if(this.recsCollide(this.player,this.bait)){const{x:e,y:r}=this.bait.center,i=this.positions.filter((t=>!(t.x===e&&t.y===r)));this.bait.relocate((z(t=i)?a:H)(t)),this.player.velocity.x+=.03,this.player.velocity.y+=.03,this.player.randomizeDirection(),this.player.animateColor($.get("green700"))}this.objectGroup.update()}var t;this.stars.forEach((t=>{const e=t.center;e.x>this.canvas.width&&(e.x=0),t.update()}))}render(){this.clearScreen(),this.ctx.save(),this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.rotate(Math.PI/180*45),this.ctx.translate(-this.canvas.width/2,-this.canvas.height/2),this.objectGroup.render(this.ctx),this.ctx.restore(),this.stars.forEach((t=>t.render(this.ctx)))}loop(t){this.update(t),this.render(),requestAnimationFrame((t=>this.loop(t)))}clearScreen(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.objectGroup=new Z,this.particles=null,this.innerBox=null,this.outerBox=null,this.positions=[],this.stars=[],this.setUp()}}(rt).start();